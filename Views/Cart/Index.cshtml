@model UShop.Models.Cart
@{
	ViewData["Title"] = "My Cart";
}

<div class="container mt-4">
	<h2 class="mb-4 text-dark">🛒 Shopping Cart</h2>

	@if (!Model.Items.Any())
	{
		<div class="alert alert-info text-center">Your cart is empty.</div>
	}
	else
	{
		<div class="row">
			<!-- Cart Items -->
			<div class="col-lg-8">
				<div class="card border-0 shadow-sm rounded-4 p-3 mb-4"
						 style="background: linear-gradient(135deg, #fff4e6, #ffe7cc);">
					@foreach (var item in Model.Items)
					{
						<div class="row py-3 border-bottom align-items-center"
								 style="background:#fff9f0; border-radius:12px; margin-bottom:12px;">
							<!-- Product Image -->
							<div class="col-md-2 d-flex justify-content-center">
								<div class="bg-white d-flex align-items-center justify-content-center rounded-3"
										 style="height:120px; width:100%;">
									<img src="@item.Product?.ImageUrl"
											 alt="@item.Product?.Name"
											 class="img-fluid"
											 style="max-height:100px; object-fit:contain;" />
								</div>
							</div>

							<!-- Product Details -->
							<div class="col-md-6">
								<h5 class="fw-semibold text-dark mb-1">@item.Product?.Name</h5>
								<p class="text-muted mb-1">Qty: @item.Quantity</p>

								<!-- Quantity Update -->
								<form asp-action="UpdateQuantity" method="post" class="d-inline">
									<input type="hidden" name="itemId" value="@item.Id" />
									<input type="number" name="quantity" value="@item.Quantity" min="1"
												 class="form-control d-inline text-center rounded-pill me-2"
												 style="width:80px; display:inline-block;" />
									<button type="submit"
													class="btn btn-outline-primary rounded-pill btn-sm px-3">
										Update
									</button>
								</form>

								<!-- Remove -->
								<form asp-action="Remove" method="post" class="d-inline ms-2">
									<input type="hidden" name="itemId" value="@item.Id" />
									<button type="submit"
													class="btn btn-link text-danger fw-bold"
													style="text-decoration:none; font-size:14px;">
										Delete
									</button>
								</form>
							</div>

							<!-- Price -->
							<div class="col-md-4 text-end">
								<p class="fw-bold text-dark mb-0">@item.UnitPrice.ToString("C")</p>
								<small class="text-muted">Total: @item.TotalPrice.ToString("C")</small>
							</div>
						</div>
					}
				</div>
			</div>

			<!-- Cart Summary -->
			<div class="col-lg-4">
				<div class="card border-0 shadow-sm rounded-4 p-3"
						 style="background: linear-gradient(135deg, #fff4e6, #ffe7cc);">
					<h5 class="fw-bold text-dark">
						Subtotal (@Model.Items.Count item@(Model.Items.Count > 1 ? "s" : "")):
						<span class="text-danger">@Model.TotalAmount.ToString("C")</span>
					</h5>
					<form asp-action="Checkout" method="post" class="mt-3">
						<a asp-action="Checkout"
							 class="btn btn-success w-100 fw-bold rounded-pill py-2">
							✅ Proceed to Buy
						</a>

					</form>
				</div>
			</div>
		</div>
	}
</div>
